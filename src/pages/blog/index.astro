---
import InnerPageLayout from '../../layouts/InnerPageLayout.astro';
import { getCollection } from 'astro:content';

const posts = await getCollection('blog');
const sortedPosts = posts.sort((a, b) => b.data.sortDate.localeCompare(a.data.sortDate));
---

<InnerPageLayout
  title="Blog â€” Empower AI"
  description="Insights and perspectives on enterprise AI, agentic orchestration, governed intelligence, and the future of regulated industries."
  heroLabel="Blog"
  heroTitle="Insights & Perspectives"
  heroSubtitle="Thought leadership on enterprise AI, agentic orchestration, and governed intelligence for regulated industries."
>
  <section class="inner-section">
    <div class="container">
      <div class="blog-grid">
        {sortedPosts.map((post) => (
          <a href={`/blog/${post.id}/`} class="blog-card card fade-in">
            {post.data.thumbImage && (
              <img src={post.data.thumbImage} alt="" class="blog-card-thumb" />
            )}
            <div class="blog-card-tags">
              {post.data.tags.map((tag: string) => (
                <span class="blog-card-tag">{tag}</span>
              ))}
            </div>
            <h2 class="blog-card-title">{post.data.title}</h2>
            <p class="blog-card-desc">{post.data.description}</p>
            <div class="blog-card-meta">
              <span>{post.data.date}</span>
              <span class="blog-card-divider">&middot;</span>
              <span>{post.data.readTime}</span>
            </div>
            <span class="blog-card-cta">Read article &rarr;</span>
          </a>
        ))}
      </div>
    </div>
  </section>
</InnerPageLayout>

<style>
  .blog-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-8);
    max-width: 800px;
    margin-inline: auto;
  }

  .blog-card {
    display: block;
    text-decoration: none;
    cursor: pointer;
    overflow: hidden;
  }

  .blog-card-thumb {
    display: block;
    width: calc(100% + 2 * var(--space-8));
    aspect-ratio: 16 / 9;
    object-fit: cover;
    margin: calc(-1 * var(--space-8)) calc(-1 * var(--space-8)) 0;
    border-radius: var(--radius-lg) var(--radius-lg) 0 0;
    border-bottom: 1px solid var(--color-border);
  }

  .blog-card:has(.blog-card-thumb) .blog-card-tags {
    margin-top: var(--space-6);
  }

  .blog-card-tags {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-2);
    margin-bottom: var(--space-4);
  }

  .blog-card-tag {
    font-size: var(--font-size-xs);
    color: var(--color-accent-1);
    background: rgba(50, 69, 255, 0.1);
    padding: var(--space-1) var(--space-3);
    border-radius: var(--radius-sm);
    border: 1px solid rgba(50, 69, 255, 0.2);
  }

  .blog-card-title {
    font-size: var(--font-size-2xl);
    font-weight: var(--font-weight-bold);
    color: var(--color-white);
    line-height: var(--line-height-tight);
    margin-bottom: var(--space-4);
    transition: color var(--transition-fast);
  }

  .blog-card:hover .blog-card-title {
    background: linear-gradient(135deg, var(--color-accent-1), var(--color-accent-2));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .blog-card-desc {
    font-size: var(--font-size-base);
    color: var(--color-text-secondary);
    line-height: var(--line-height-relaxed);
    margin-bottom: var(--space-6);
  }

  .blog-card-meta {
    display: flex;
    align-items: center;
    gap: var(--space-3);
    font-size: var(--font-size-sm);
    color: var(--color-text-muted);
    margin-bottom: var(--space-4);
  }

  .blog-card-divider {
    color: var(--color-text-muted);
  }

  .blog-card-cta {
    font-size: var(--font-size-sm);
    font-weight: var(--font-weight-semibold);
    color: var(--color-accent-1);
    transition: color var(--transition-fast);
  }

  .blog-card:hover .blog-card-cta {
    color: var(--color-accent-2);
  }
</style>
